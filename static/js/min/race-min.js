function addListRaceDisplayMap(){$("#link-display-map").click(function(e){e.preventDefault(),e.stopPropagation(),$("#address-map").is(":hidden")?($("#link-display-map").html("masquer la carte"),$("#address-map").show("fast",function(){map.set({styles:map_styles}),google.maps.event.trigger(map,"resize"),map.setCenter({lat:lat,lng:lng})})):($("#address-map").hide("fast"),$("#link-display-map").html("afficher la carte"))})}function addListHoverActionButton(){$(".icon-event").on("mouseenter",function(e){el=$("#event-action-text"),el.css("visibility","visible"),el.html(e.target.alt)}),$(".icon-event").on("mouseleave",function(e){el=$("#event-action-text"),el.css("visibility","hidden")})}function createMap(){"undefined"==typeof map_styles&&(map_styles=[]),map=new google.maps.Map(document.getElementById("address-map"),mapOptions),map.setOptions({styles:map_styles});var e=new google.maps.Marker({position:{lat:lat,lng:lng},map:map,zIndex:1})}function getCookie(e){var t=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=jQuery.trim(a[n]);if(o.substring(0,e.length+1)==e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}function csrfSafeMethod(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}function addToPlanning(e){$.ajax({url:"/api/planning/add",type:"POST",data:{race:e},success:function(e,t){window.location.reload()}})}var mapOptions,lat,lng;google.maps.event.addDomListener(window,"load",createMap),$(document).ready(function(){lat=parseFloat($("#race-location").data("lat")),lng=parseFloat($("#race-location").data("lng")),mapOptions={mapTypeId:google.maps.MapTypeId.TERRAIN,center:{lat:lat,lng:lng},zoom:10,maxZoom:15,panControl:!1,zoomControl:!0,streetViewControl:!1},addListRaceDisplayMap(),addListHoverActionButton()});var csrftoken=getCookie("csrftoken");$.ajaxSetup({beforeSend:function(e,t){csrfSafeMethod(t.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",csrftoken)}});