function addListRaceDisplayMap(){$("#link-display-map").click(function(a){a.preventDefault(),a.stopPropagation(),$("#address-map").is(":hidden")?($("#link-display-map").html("masquer la carte"),$("#address-map").show("fast",function(){map.set({styles:map_styles}),google.maps.event.trigger(map,"resize"),map.setCenter({lat:lat,lng:lng})})):($("#address-map").hide("fast"),$("#link-display-map").html("afficher la carte"))})}function createMap(){"undefined"==typeof map_styles&&(map_styles=[]),map=new google.maps.Map(document.getElementById("address-map"),mapOptions),map.setOptions({styles:map_styles});var a=new google.maps.Marker({position:{lat:lat,lng:lng},map:map,zIndex:1})}function getCookie(a){var e=null;if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var o=jQuery.trim(t[n]);if(o.substring(0,a.length+1)==a+"="){e=decodeURIComponent(o.substring(a.length+1));break}}return e}function csrfSafeMethod(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}function addToPlanning(a){$.ajax({url:"/api/planning/add",type:"POST",data:{race:a},success:function(a,e){window.location.replace("/planning/")}})}var mapOptions,lat,lng;google.maps.event.addDomListener(window,"load",createMap),$(document).ready(function(){lat=parseFloat($("#race-location").data("lat")),lng=parseFloat($("#race-location").data("lng")),mapOptions={mapTypeId:google.maps.MapTypeId.TERRAIN,center:{lat:lat,lng:lng},zoom:10,maxZoom:15,panControl:!1,zoomControl:!0,streetViewControl:!1},addListRaceDisplayMap()});var csrftoken=getCookie("csrftoken");$.ajaxSetup({beforeSend:function(a,e){csrfSafeMethod(e.type)||this.crossDomain||a.setRequestHeader("X-CSRFToken",csrftoken)}});